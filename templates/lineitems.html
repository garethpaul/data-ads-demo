{% extends "base.html" %}
{% load tags %}
{% load humanize %}

{% block title %}Ads Accounts{% endblock %}

{% block content %}
<div class="row">
  <h4><a href="accounts">Ads Account</a> > <a href="campaigns?account_id={{ account_id }}">Campaign</a> > Line Items</h4>
  <!-- Setup Table to consume Ads Api -->
  <table class="table">
    <thead>
      <tr>
        <th>Name</th>
        <th>Objective</th>
        <th>Bid Amount</th>
        <th>Id</th>
      </tr>
    </thead>
    <tbody class="table-data">
    </tbody>
  </table>
</div>
<script>
$(document).ready(function () {
    $.getJSON("../ads/api/line_items?account_id={{ account_id }}&campaign_id={{ campaign_id }}",
    function (json) {
        var tr;
        for (var i = 0; i < json["line_items"].length; i++) {
            tr = $('<tr/>');
            var item = json["line_items"][i]
            var line_item_id = item.id
            tr.append("<td><a href='line_items?account_id=" + json["account_id"] + "&campaign_id=" + json["campaign_id"]  + "'>" + item.name + "</a></td>");
            tr.append("<td>" + item.objective +"</td>")
            tr.append("<td>" + item.bid_amount +"</td>")
            tr.append("<td>" + item.id + "</td>");
            $('.table').append(tr);
        }
    });
});
</script>
{% endblock %}
